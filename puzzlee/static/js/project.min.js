function search_for_artist(e,t){const n=t.filter((t=>t[0].toLowerCase().search(e.toLowerCase())>-1));return n.length>0?n.sort((t=>t[0].toLowerCase().search(e.toLowerCase()))):[]}function autocomplete(e,t){var n;function o(e){if(!e)return!1;!function(e){for(var t=0;t<e.length;t++)e[t].classList.remove("autocomplete-active")}(e),n>=e.length&&(n=0),n<0&&(n=e.length-1),e.length>0&&e[n].classList.add("autocomplete-active")}function s(t){for(var n=document.getElementsByClassName("autocomplete-items"),o=0;o<n.length;o++)t!=n[o]&&t!=e&&n[o].parentNode.removeChild(n[o])}e.addEventListener("input",(function(a){var i,c,l;if(l=this.value,s(),!l)return!1;n=-1;let r=search_for_artist(l,t);(i=document.createElement("DIV")).setAttribute("id",this.id+"autocomplete-list"),i.setAttribute("class","autocomplete-items"),this.parentNode.appendChild(i),console.log(r),r.map((t=>{c=document.createElement("div");let n=new RegExp(l,"gi");res=t[0].replace(n,(e=>`<strong>${e}</strong>`)),c.innerHTML=res,c.innerHTML+=`<input type='hidden' value='${JSON.stringify(t)}'>`,c.addEventListener("click",(function(t){selected=JSON.parse(this.getElementsByTagName("input")[0].value),e.value=selected[0],answer_input=document.getElementById("id_artist_answer"),answer_input.value=selected[1],s()})),i.appendChild(c)})),x=document.getElementById(this.id+"autocomplete-list"),console.log(x),x&&(ac_list=x.getElementsByTagName("div"),n=0,o(ac_list))})),e.addEventListener("keydown",(function(e){let t=document.getElementById(this.id+"autocomplete-list");t&&(t=t.getElementsByTagName("div")),"ArrowDown"===e.code?(n++,o(t)):"ArrowUp"===e.code?(n--,o(t)):"Enter"===e.code&&(e.preventDefault(),n>-1&&t&&t[n].click())})),document.addEventListener("click",(function(e){s(e.target)}))}const ale=document.getElementById("artist_list");if(ale){const e=JSON.parse(ale.textContent);artist_div=document.getElementById("div_id_artist_fullname"),artist_div.classList.add("autocomplete"),artist_input=document.getElementById("id_artist_fullname"),autocomplete(artist_input,e)}const APPROVAL_OPTIONS={rejected:0,unset:1,approved:2};function updateCard(e,t){let n=document.getElementById(`dp_col_${e}`);switch(t){case APPROVAL_OPTIONS.rejected:n.innerHTML="<p>Moved to rejected</p>";break;case APPROVAL_OPTIONS.unset:n.innerHTML="<p>Moved to unset</p>";break;case APPROVAL_OPTIONS.approved:n.innerHTML="<p>Moved to approved</p>"}}function setApproved(e,t){const n=document.querySelector("input[name=csrfmiddlewaretoken]").value,o={detailpage:e,approved:t};fetch(APPROVAL_ENDPOINT,{method:"post",headers:{"Content-Type":"application/json","X-CSRFToken":n,Accept:"application/json","X-Requested-With":"XMLHttpRequest"},body:JSON.stringify(o)}).then((e=>(console.log(e),e.json()))).then((n=>{console.log(n),"success"===n.status?(console.log("success"),updateCard(e,t)):console.log(n.message)})).catch((e=>{console.log(e)}))}